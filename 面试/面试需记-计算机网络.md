---
title: 面试需记--计算机网络
date: 2020-03-26 00:12:20
tags:
    - 计算机网络
categories:
    - 面试
---

# 常见计算机网络面试题


## 目录

+ 简述TCP\UDP的区别
+ TCP的三次握手四次挥手
+ 浏览器输入网址后会发生什么
+ ARP协议工作过程
+ 简述了解的一些端口号及对应的服务
+ HTTP 协议包括哪些请求
+ 简述HTTP中POST和GET的区别
+ HTTPS和HTTP的区别
+ HTTP状态码
+ HTTP首部


## 简述TCP\UDP的区别

[B站视频链接](https://www.bilibili.com/video/BV1y7411q7RK/?spm_id_from=333.788.videocard.2)

TCP和UDP是OSI模型中的**传输层**中的协议，TCP提供可靠传输，而UDP则常用于让广播和细节控制交给应用的通信传输。

首部的区别

![](https://figure-bed-y.oss-cn-beijing.aliyuncs.com/img/20200622145522.png)

+ TCP的包头结构，至少20字节
  + 源端口16位，目的端口16位
  + 序列号32位
  + 回应序号32位
  + 数据偏移 4位，保留 6位，控制位6位，窗口大小16位
  + 校验和16位，紧急指针 16位
  + 选项32位

+ 确认ACK，仅当ACK=1时，确认号字段才有效。TCP规定，在连接建立后所有报文的传输都必须把ACK置1；
+ 同步SYN，在连接建立时用来同步序号。当SYN=1，ACK=0，表明是连接请求报文，若同意连接，则响应报文中应该使SYN=1，ACK=1；
+ 终止FIN，用来释放连接。当FIN=1，表明此报文的发送方的数据已经发送完毕，并且要求释放；

+ UDP的包头结构
  + 源端口16位，目的端口16位
  + 包长度16位，校验和16位
  


+ 表格形式
    ||连接|可靠性|流量控制|模式|系统资源占用|首部|
    |--|--|--|--|--|--|--|
    |UDP|无|不可靠，丢包不会重发，顺序乱了不会纠正|不使用|数据报|少|简单，开销少|
    |TCP|有|可靠，丢包会重新发生，顺序打乱会进行排序|使用|流|多|复杂开销大|

+ 回答时的描述可以如下
  + TCP是面向连接的提供可靠的数据传输，保证数据顺序，以及丢包重传，UDP面向非链接即发送数据前不需要建立连接。丢包不会重发。
  + TCP面向字节流，UDP面向报文
  + TCP系统资源占用高，传输慢，UDP系统资源占用少，传输快


## TCP的三次握手四次挥手

（来自简析TCP的三次握手与四次分手）
![](https://figure-bed-y.oss-cn-beijing.aliyuncs.com/img/20200622145544.png)

[来自csdn](https://blog.csdn.net/qzcsu/article/details/72861891)
![](https://figure-bed-y.oss-cn-beijing.aliyuncs.com/img/20200622145612.png)


在TCP/IP协议中TCP提供可靠的连接时通过三次握手进行初始化的，三次握手的目的时同步连接双方的序列号和确认好并交换TCP窗口大小信息。
+ 三次握手
  + 第一次握手：建立连接，客户端发送连接请求报文具体的将SYN位置为1，SequenceNumber设为x；发送后进入SYN_SEND状态，等待服务器的确认。
  + 第二次握手：服务器收到客户端发来的SYN报文段，需要对这个报文段进行确认，设置AcknowledgementNumber为x+1（SquenceNumber+1）;同时自己还要发送SYN请求，将SYN位置为1，SequenceNumber设为y，发送后服务器进入SYN_RECV状态
  + 第三次握手：客户端收到SYN_ACK报文段。首先检查AcknowledgeNumber是否为x+1，是的话将AcknowledgeNumber设置为y+1，向服务器发送ACK报文段。这个报文段发送完毕后客户端和服务端都会进入ESRABLISHED状态，完成三次握手。

+ 三次握手的特点：没有应用层的数据 ,SYN这个标志位只有在TCP建立连接时才会被置1 ,握手完成后SYN标志位被置0。
+ 为什么要三次
  + 一句话，主要防止已经失效的连接请求报文突然又传送到了服务器，从而产生错误。
  + >如果使用的是两次握手建立连接，假设有这样一种场景，客户端发送了第一个请求连接并且没有丢失，只是因为在网络结点中滞留的时间太长了，由于TCP的客户端迟迟没有收到确认报文，以为服务器没有收到，此时重新向服务器发送这条报文，此后客户端和服务器经过两次握手完成连接，传输数据，然后关闭连接。此时此前滞留的那一次请求连接，网络通畅了到达了服务器，这个报文本该是失效的，但是，两次握手的机制将会让客户端和服务器再次建立连接，这将导致不必要的错误和资源的浪费。
    >如果采用的是三次握手，就算是那一次失效的报文传送过来了，服务端接受到了那条失效报文并且回复了确认报文，但是客户端不会再次发出确认。由于服务器收不到确认，就知道客户端并没有请求连接。


+ 四次挥手
  + 第一次挥手：客户端发送释放连接报文，FIN位置为1，SequenceNumber设置为u，此时客户端进入FIN_WAIT_1状态。
  + 第二次挥手：服务端收到FIN后做出响应，将AcknoledgeNumber=u+1，同时发送SYN请求，SequenceNumber设置为v，此时服务端进入CLOSE_WAIT状态，即客户端已经没有数据要发送了
  + 间隙：客户端收到服务段发送的确认请求后进入FIN-WAIT-2状态，等待服务器发送连接释放报文
  + 第三次挥手：服务器向客户端放松连接释放报文，FIN=1,AcknoledgeNumber=u+1，SequenceNumber=w服务器进入LAST-ACK状态，等待客户端的确认
  + 第四次挥手：客户端收到服务器发来的连接释放报文后,必须发送确认，因此AcknoledgeNumber=w+1，客户端进入TIME-WAIT状态
  + 最后服务端收到确认后立刻进入CLOSED状态

+ ACK 是TCP报头的控制位之一，对数据进行确认。确认由目的端发出， 用它来告诉发送端这个序列号之前的数据段都收到了。 比如确认号为X，则表示前X-1个数据段都收到了，只有当ACK=1时,确认号才有效，当ACK=0时，确认号无效，这时会要求重传数据，保证数据的完整性。
+ SYN 同步序列号，TCP建立连接时将这个位置1。
+ FIN 发送端完成发送任务位，当TCP完成数据传输需要断开时,，提出断开连接的一方将这位置1。

## 浏览器输入网址后会发生什么

1. 查找域名对应的IP地址，这一步会一次查找浏览器缓存，系统缓存，路由器缓存，DNS缓存，根域名服务器
2. 浏览器向IP对应的Web服务器发送HTTP请求
3. 服务器响应请求，发回网页内容
4. 浏览器解析网页内容

具体的，以百度为例

1. 客户端浏览器通过DNS解析到百度的IP地址，通过这个IP地址找到客户端到服务端的路径。客户端浏览器发起一个HTTP会话到这个IP，然后通过TCP进行封装数据包，输入到网络层
2. 在客户端的传输层，会把这个HTTP会话请求分成报文段，添加源和目的端口，如服务器一般是80端口，客户端随机生成一个端口，然受使用IP层的IP地址查找目的端
3. 客户端的网络层不用关系应用层的传输内容，主要是通过查找路由表确定如何到达服务器。
4. 客户端的链路层通过邻居协议查找给定IP的MAC地址，然后发送ARP请求查找目的地址，进一步传输

## ARP协议工作过程

1. 首先每个主机都有自己的ARP缓存列表， 存放IP地址和MAC地址的对应关系
2. 当源主机发送数据时，首先检查ARP列表中是否有对应的IP地址的目的主机的MAC地址。如果有则直接发送，如果没有则向本网段的所有主机发送ARP数据包，数据包的内容有：源主机的IP地址，MAC地址，目的主机的IP地址，MAC地址。
3. 当本网段的主机收到该ARP数据包时首先检查其中的目的IP地址和自己的IP地址是否对应，如果不是，则忽略，如果是，则将其中的源主机IP和MAC作为目的IP和MAC，将自己的信息写入，并将获得的MAC地址写入ARP缓存，如果存在则覆盖。
4. 源主机收到后将目的主机的IP和MAC写入自己的ARP缓存中。


## 应用层的常见端口号

|端口|服务|
|--|--|
|21|FTP（文件传输协议）|
|22|SSH|
|23|Telnet（远程登录）服务|
|25|SMTP（简单邮件传输协议）|
|53|DNS域名服务器|
|80|HTTP 超文本传输协议|
|110|POP3邮件协议|
|443|HTTPS
|1080|Sockets
|1521|Oracle|
|3306|MySQL|

## HTTP 协议包括哪些请求
|||
|--|--|
|GET|用于获取资源|
|POST|用于发送包含用户提交数据的请求|
|PUT|用于修改某个内容|
|DELET|用于删除某个内容|

## 简述HTTP中GET和POST的区别
1. GET使用URL或Cookie传参，而POST将数据放在BODY中
2. GET方式提交的数据有长度限制，则POST的数据则可以非常大
3. POST比GET安全，因为数据在地址栏上不可见
4. 根据HTTP规范，GET用于信息获取，而且应该是安全和幂等的
5. 根据HTTP规范，POST请求表示可能修改服务器上资源的请求

## HTTPS和HTTP的区别

1. http是超文本传输协议，信息是明文传输，https则是具有安全性的ssl加密传输协议。
2. http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。
3. http的连接很简单，是无状态的；HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。
4. HTTP 页面响应速度比 HTTPS 快，主要是因为 HTTP 使用 TCP 三次握手建立连接，客户端和服务器需要交换 3 个包，而 HTTPS除了 TCP 的三个包，还要加上 ssl 握手需要的 9 个包，所以一共是 12 个包。

## HTTP状态码

||类别|原因|
|--|--|--|
|1xx|信息状态码|接受的请求正在处理|
|2xx|成功状态码|请求正常处理完毕|
|3XX|重定向状态码|需要进行附加操作完成请求，一般就是比如用书签访问某个网页，但是网页的实际网址变动了|
|4xx|客户端错误状态码|服务器无法处理请求|
|5xx|服务器错误状态码|服务器处理请求出错|
|200|OK|表示从客户端发送的请求在服务端被正常处理，比如GET方法对应请求的资源实体会作为响应返回|
|204|No Content|服务器接受的请求已经成功处理，但在返回的响应报文中不含有实体的主体部分，及页面不更新|
|206|Partial Content|只请求部分资源，响应报文中包含指定范围的实体内容|
|400|Bad Request|请求报文中存在语法错误|
|401|Unauthorized|请求需要认证|
|403|Forbidden|请求资源的访问被服务器拒绝|
|404|Not Found|服务器上没有请求的资源|
|500|Internal Server Error|服务端在执行请求时发生错误，可能是Web应用存在的bug导致|
|503|Service Unavailable|服务器处于超负载运行或停机维护状态|


## HTTTP报文首部

+ 请求报文
  + 请求行/状态行：请求方法，URI，HTTP版本/状态码，HTTP版本号
  + 首部字段：主要提供报文主题大小，所使用的语言，认证信息等

## 文章参考
+ [知乎](https://zhuanlan.zhihu.com/p/24860273)
+ [CSDN](https://blog.csdn.net/qzcsu/article/details/72861891)
+ [CSDN](https://blog.csdn.net/xionghuixionghui/article/details/68569282)
+ [路人甲TM公众号](https://mp.weixin.qq.com/s/TR4yIItiFmFBh0QWMlK3Jg)

